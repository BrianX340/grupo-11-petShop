<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Productos</title>
    <link rel="stylesheet" href="/css/admin/products/addProducts.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

</head>

<body>
    <%- include('../../partial/header'); %>

        <section class='addProductSection'>
            <div>

                <form action="/admin/products/create" id='formCreateAdd' class="formCreate" method="POST" enctype="multipart/form-data">

                    <div class='finalCardTitle'><span>Carga de Productos</span></div>

                    <div class='inputsContainerBox'>



                        <div class="input-group">
                            <span class="input-group-addon" id="basic-addon1">Imagen: </span>
                            <input type="file" class="form-control" placeholder="Ingrese el nombre..." aria-describedby="basic-addon1" id="inputImageAdd" name="image">
                        </div>
                        <% if (locals.errors && errors.image) { %>
                            <small class="textDanger">
                            <%= errors.image.msg %>
                            </small>
                            <% } %>

                                <div class="input-group">
                                    <span class="input-group-addon" id="basic-addon1">Nombre: </span>
                                    <input type="text" class="form-control" placeholder="Ingrese el nombre..." aria-describedby="basic-addon1" id="inputName" name="name">
                                </div>
                                <% if (locals.errors && errors.name) { %>
                                    <small class="textDanger">
                            <%= errors.name.msg %>
                            </small>
                                    <% } %>

                                        <div class="input-group">
                                            <span class="input-group-addon" id="basic-addon1">Precio Compra: </span>
                                            <input type="text" class="form-control" placeholder="Ingrese el nombre..." aria-describedby="basic-addon1" id="inputBuyPrice" name="buyPrice">
                                        </div>
                                        <% if (locals.errors && errors.buyPrice) { %>
                                            <small class="textDanger">
                            <%= errors.buyPrice.msg %>
                            </small>
                                            <% } %>

                                                <div class="input-group">
                                                    <span class="input-group-addon" id="basic-addon1">Precio Venta: </span>
                                                    <input type="text" class="form-control" placeholder="Ingrese el nombre..." aria-describedby="basic-addon1" id="inputSellPrice" name="sellPrice">
                                                </div>
                                                <% if (locals.errors && errors.sellPrice) { %>
                                                    <small class="textDanger">
                            <%= errors.sellPrice.msg %>
                            </small>
                                                    <% } %>

                                                        <div class="input-group">
                                                            <span class="input-group-addon" id="basic-addon1">Descuento: </span>
                                                            <input type="number" class="form-control" placeholder="Ingrese el descuento..." aria-describedby="basic-addon1" id="inputDiscount" name="discount">
                                                        </div>


                                                        <div class="input-group">
                                                            <span class="input-group-addon" id="basic-addon1">Valoracion: </span>
                                                            <input type="number" class="form-control" placeholder="Ingrese el descuento..." aria-describedby="basic-addon1" id="inputValoration" name="valoration">
                                                        </div>
                                                        <% if (locals.errors && errors.valoration) { %>
                                                            <small class="textDanger">
                            <%= errors.valoration.msg %>
                            </small>
                                                            <% } %>

                                                                <div class="input-group">
                                                                    <span class="input-group-addon" id="basic-addon1">Descripcion: </span>
                                                                    <input type="text" class="form-control" placeholder="Ingrese el nombre..." aria-describedby="basic-addon1" id="inputDescription" name="description">
                                                                </div>
                                                                <% if (locals.errors && errors.description) { %>
                                                                    <small class="textDanger">
                            <%= errors.description.msg %>
                            </small>
                                                                    <% } %>

                                                                        <div class="input-group">
                                                                            <span class="input-group-addon" id="basic-addon1">Cantidad: </span>
                                                                            <input type="text" class="form-control" placeholder="Ingrese el nombre..." aria-describedby="basic-addon1" id="inputAmount" name="stock">
                                                                        </div>
                                                                        <% if (locals.errors && errors.stock) { %>
                                                                            <small class="textDanger">
                            <%= errors.stock.msg %>
                            </small>
                                                                            <% } %>

                                                                                <div class="input-group">
                                                                                    <span class="input-group-addon" id="basic-addon1">Codigo de Barras: </span>
                                                                                    <input type="text" class="form-control" placeholder="Ingrese el nombre..." aria-describedby="basic-addon1" id="inputBarcode" name="barcode">
                                                                                </div>
                                                                                <% if (locals.errors && errors.barcode) { %>
                                                                                    <small class="textDanger">
                            <%= errors.barcode.msg %>
                            </small>
                                                                                    <% } %>

                                                                                        <div class="input-group">
                                                                                            <span class="input-group-addon" id="basic-addon1">Animal: </span>
                                                                                            <select hidden class="form-control" name="categoryId" id="inputCategoryAdd" form="formCreateAdd">
                                <option value="default">Elija una categoria</option>
                                <option value="1">Gato</option>
                                <option value="2">Perro</option>
                            </select>
                                                                                        </div>
                                                                                        <% if (locals.errors && errors.categoryId) { %>
                                                                                            <small class="textDanger">
                            <%= errors.categoryId.msg %>
                            </small>
                                                                                            <% } %>

                                                                                                <div class="input-group">
                                                                                                    <span class="input-group-addon" id="basic-addon1">Tipo de Producto: </span>
                                                                                                    <select class="form-control" name="subCategoryId" id="inputSubCategoryAdd" form="formCreateAdd">
                                <option hidden value="default">Elija tipo de producto</option>
                                <option value="1">Alimentos</option>
                                <option value="2">Higiene</option>
                                <option value="3">Juguetes</option>
                                <option value="4">Camas</option>
                            </select>
                                                                                                </div>
                                                                                                <% if (locals.errors && errors.subCategoryId) { %>
                                                                                                    <small class="textDanger">
                            <%= errors.subCategoryId.msg %>
                            </small>
                                                                                                    <% } %>


                    </div>

                    <div class="btn-group buttonOptionProduct" role="group" aria-label="...">
                        <button id='back' type="button" class="btn btn-default backButton">Volver</button>
                        <button id='limpiar' type="button" class="btn btn-default cleanInputs">Limpiar campos</button>
                        <button type="submit" class="btn btn-default" id='productCreate'>Cargar</button>
                    </div>

                </form>
            </div>
        </section>




        <% if (data.productStatus == 'created') { %>
            <div id='operationSuccess'>
                <img id='successfulOperation' src="/img/admin/ok.gif" alt="">
            </div>
            <% } else if (data.productStatus == 'failed') { %>
                <div id='operationSuccess'>
                    <img id='failedOperation' src="/img/admin/error.gif" alt="">
                </div>
                <% } %>

</body>

<script>
    setTimeout(() => {
        document.getElementById('operationSuccess').style.display = 'none'
        document.getElementById('successfulOperation').style.display = 'none'
    }, 2500)

    //Limpieza de Campos
    function limpiarCampos() {
        document.getElementById("inputName").value = ''
        document.getElementById("inputBuyPrice").value = ''
        document.getElementById("inputSellPrice").value = ''
        document.getElementById("inputDiscount").value = ''
        document.getElementById("inputDiscount").value = ''
        document.getElementById("inputValoration").value = ''
        document.getElementById("inputDescription").value = ''
        document.getElementById("inputAmount").value = ''
        document.getElementById("inputBarcode").value = ''

    }

    document.addEventListener('click', event => {
        try {
            elementId = event.path[0].id
            elementClass = event.path[0].className
        } catch {
            elementId = event.target.id
            elementClass = event.path[0].className
        }

        if (elementId == 'limpiar') {
            limpiarCampos()
            event.preventDefault()
        } else if (elementId == 'back') {
            window.location.href = `${window.location.origin}`
        }
    })
</script>

<script src="/js/addProduct.js"></script>

</html>