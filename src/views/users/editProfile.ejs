<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edición de perfil</title>
    <link rel="stylesheet" href="/css/users/editProfile.css">
</head>

<body>

    <%- include('../partial/header'); %>
        <div class="userProfile_container">
            <section class="userProfileBodySection">
                <main class="editProfile-container">

                    <h3 class="userTitle">Edita tu perfil</h3>

                    <form action="/ps/profile/edit/<%= data.session.user.id %>?_method=PUT" method="POST" class="form_editProfile">
                        <section class="form_editProfileContainer">
                            <label class="labelEditProfile" for="name">Nombre: </label>
                            <div class="editProfile_inputContainer">
                                <input class="editProfile_input" type="text" name="name" placeholder="Nombre" value="<%= locals.old ? old.name : data.session.user.name %>">
                                <% if (locals.errors && errors.name) { %>
                                    <small class="text-danger"><%= errors.name.msg %> </small>
                                    <% } %>
                            </div>
                            <label class="labelEditProfile" for="lastName">Apellido:</label>
                            <div class="editProfile_inputContainer">
                                <input class="editProfile_input" type="text" name="lastName" placeholder="Apellido" value="<%= locals.old ? old.lastName : data.session.user.lastName %>">
                                <% if (locals.errors && errors.last_name) { %>
                                    <small class="text-danger"><%= errors.last_name.msg %> </small>
                                    <% } %>
                            </div>
                            <label class="labelEditProfile" for="email">Correo Electronico:</label>
                            <div class="editProfile_inputContainer">
                                <input class="editProfile_input" type="email" name="email" placeholder="Ingresá tu email" value="<%= data.session.user.email %>">
                            </div>
                            <label class="labelEditProfile" for="tel">Telefono:</label>
                            <div class="editProfile_inputContainer">
                                <input class="editProfile_input" type="text" name="tel" placeholder="Ingresá tu teléfono" value="<%= data.session.user.tel ? data.session.user.tel : " " %>">
                            </div>
                            <label class="labelEditProfile" for="address">Domicilio:</label>
                            <div class="editProfile_inputContainer">
                                <input class="editProfile_input" type="text" name="address" placeholder="Domicilio" value="<%= data.session.user.address.address ? data.session.user.address.address : " " %>">
                            </div>
                            <label class="labelEditProfile" for="cp">Codigo Postal:</label>
                            <div class="editProfile_inputContainer">
                                <input class="editProfile_input" type="text" name="cp" placeholder="Código postal" value="<%= data.session.user.address.cp ? data.session.user.address.cp : " " %>">
                            </div>
                            <label class="labelEditProfile" for="state">Provincia:</label>
                            
                            <div >
                                <select name="state" id="provinceList"></select>
                                <% if (data.session.user.address.state) { %>
                                    <option value="<%= data.session.user.address.state %>" selected hidden><%= data.session.user.address.state %></option>
                                <% } else { %>
                                    <option value="" selected hidden>Provincia</option>
                                <% } %>
                            </div>
                            <label class="labelEditProfile" for="city">Localidad:</label>
                            <div>
                                <select name="city" id="cityList"></select>
                                <% if (data.session.user.address.city) { %>
                                    <option value="<%= data.session.user.address.city %>" selected hidden><%= data.session.user.address.city %></option>
                                <% } %>
                            </div>
                        </section>

                        <section class="editProfile_select">
                            <!-- <div>
                                <select class="editProfile_selectContainer" name="province" id="">
                                <option value="">Provincia</option>
                            </select>
                            </div>
                            <div class="botonEditProfile">
                                
                            </div>
                            <div>
                                <select class="editProfile_selectContainer" name="city" id="">
                                <option value="">Localidad</option>
                            </select>
                            </div> -->

                            

                        </section>

                        <section class="avatarSelectContainer">
                            <div class="avatarSelect">
                                <input  type="text" id='avatarId' name='avatarId' value='<%= data.session.user.avatarId %>' style='display:none'>
                                <button id='selectAvatarButton'>
                                Seleccionar Avatar
                            </button>
                                <div id='avatarBox'>
                                    <div>
                                        <div class='tituloSelectAvatar'>
                                            <span>Seleccione un Avatar</span>
                                        </div>
                                        <div class='avatarsContainer'>
                                            <% avatarList.forEach(avatar => { %>
                                                <div class='imgAvatar'>
                                                    <figure>
                                                        <img src="/img/avatars/<%= avatar.path %>" id='<%= avatar.id %>' class='avatarClicked' alt="">
                                                    </figure>
                                                </div>
                                            <% }) %>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>


                        <div class="editProfile_botonContainer">
                            <button class="botonEditProfile" type="submit" class="editProfile_boton">
                            GUARDAR
                        </button>
                        </div>

                    </form>
                </main>
            </section>
        </div>

        <%- include('../partial/footer'); %>


</body>
<script src="/js/editProfile.js"></script>
<script src="/js/apiProfile.js"></script>

</html>